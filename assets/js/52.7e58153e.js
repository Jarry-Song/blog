(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{397:function(t,v,_){"use strict";_.r(v);var a=_(42),r=Object(a.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"b-树"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#b-树"}},[t._v("#")]),t._v(" B+树")]),t._v(" "),_("p",[t._v("B+树是B树的变体，常用于数据库和操作系统的文件系统中")]),t._v(" "),_("ul",[_("li",[t._v("MySQL数据库的索引就是基于B+树实现的")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://gitee.com/jarrysong/img/raw/master/img/image-20201015221214903.png",alt:"image-20201015221214903"}})]),t._v(" "),_("h2",{attrs:{id:"b-树的特点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#b-树的特点"}},[t._v("#")]),t._v(" B+树的特点")]),t._v(" "),_("ul",[_("li",[t._v("分为内部节点（非叶子）、叶子节点2种节点")]),t._v(" "),_("li",[t._v("✓内部节点只存储key，不存储具体数据")]),t._v(" "),_("li",[t._v("✓叶子节点存储key和具体数据")]),t._v(" "),_("li",[t._v("所有的叶子节点形成一条有序链表")]),t._v(" "),_("li",[t._v("m阶B+树非根节点的元素数量 x")]),t._v(" "),_("li",[t._v("✓┌ m/2 ┐ ≤ x ≤m")])]),t._v(" "),_("p",[t._v("关于MySQL发音的官方说明")]),t._v(" "),_("p",[t._v("https://dev.mysql.com/doc/refman/8.0/en/what-is-mysql.html")]),t._v(" "),_("ul",[_("li",[t._v("The official way to pronounce “MySQL” is “My Ess Que Ell” (not “my sequel”),")]),t._v(" "),_("li",[t._v("but we do not mind if you pronounce it as “my sequel” or in some other localized way.")])]),t._v(" "),_("h2",{attrs:{id:"硬盘的分类"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#硬盘的分类"}},[t._v("#")]),t._v(" 硬盘的分类")]),t._v(" "),_("p",[t._v("市面上常见的硬盘有：机械硬盘（Hard Disk Drive，HDD）、固态硬盘（Solid State Drive，SSD）")]),t._v(" "),_("ul",[_("li",[t._v("我们主要介绍一下机械硬盘相关概念")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://gitee.com/jarrysong/img/raw/master/img/image-20201016090615443.png",alt:"image-20201016090615443"}})]),t._v(" "),_("h3",{attrs:{id:"盘片-platter-、盘面-side-、读写磁头-head"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#盘片-platter-、盘面-side-、读写磁头-head"}},[t._v("#")]),t._v(" 盘片（platter）、盘面（side）、读写磁头（head)")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://gitee.com/jarrysong/img/raw/master/img/image-20201016084530703.png",alt:"image-20201016084530703"}})]),t._v(" "),_("p",[t._v("硬盘一般由多个盘片组成\n每个盘片包含2个盘面\n每个盘面有1个对应的读写磁头")]),t._v(" "),_("ul",[_("li",[t._v("盘面、磁头由上到下从0开始编号")])]),t._v(" "),_("h3",{attrs:{id:"磁道-track-、扇区-sector"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#磁道-track-、扇区-sector"}},[t._v("#")]),t._v(" 磁道（track）、扇区（sector)")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://gitee.com/jarrysong/img/raw/master/img/image-20201016084745708.png",alt:"image-20201016084745708"}})]),t._v(" "),_("p",[t._v("盘面中的一圈圈灰色圆环为是一条条的磁道")]),t._v(" "),_("ul",[_("li",[t._v("磁道由外到内从0开始编号")])]),t._v(" "),_("p",[t._v("每条磁道上的一个弧段叫做一个扇区")]),t._v(" "),_("ul",[_("li",[t._v("扇区是磁盘的最小读写单位")]),t._v(" "),_("li",[t._v("一个扇区的大小通常是512字节")]),t._v(" "),_("li",[t._v("✓也有4096字节的")])]),t._v(" "),_("h3",{attrs:{id:"早期硬盘的扇区细节"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#早期硬盘的扇区细节"}},[t._v("#")]),t._v(" 早期硬盘的扇区细节")]),t._v(" "),_("p",[t._v("每条磁道的扇区数相同")]),t._v(" "),_("ul",[_("li",[t._v("所以外圈扇区的面积会比内圈扇区大")])]),t._v(" "),_("p",[t._v("为了更好的读取数据，它们会存放相同的字节数")]),t._v(" "),_("ul",[_("li",[t._v("所以外圈扇区的记录密度要比内圈小，会浪费大量的存储空间")])]),t._v(" "),_("p",[t._v("硬盘的存储容量 = 磁头数 * 盘面磁道数 * 磁道扇区数 * 扇区字节数")]),t._v(" "),_("h3",{attrs:{id:"柱面-cylinder"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#柱面-cylinder"}},[t._v("#")]),t._v(" 柱面（cylinder)")]),t._v(" "),_("p",[t._v("相同编号的磁道形成一个圆柱，称为柱面")]),t._v(" "),_("ul",[_("li",[t._v("磁盘的柱面数与一个盘面的磁道数是相等的")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://gitee.com/jarrysong/img/raw/master/img/image-20201016085223662.png",alt:"image-20201016085223661"}})]),t._v(" "),_("h3",{attrs:{id:"磁盘块"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#磁盘块"}},[t._v("#")]),t._v(" 磁盘块")]),t._v(" "),_("p",[t._v("磁盘块，在Windows中叫做簇（cluster），在Linux中叫做块（ block ）")]),t._v(" "),_("ul",[_("li",[t._v("相邻的 2n 个扇区组合在一起，形成一个磁盘块")]),t._v(" "),_("li",[t._v("操作系统对磁盘进行管理时，以磁盘块作为最小读写单位")]),t._v(" "),_("li",[t._v("✓一般一个磁盘块是4096字节（4KB，由8个连续的512字节扇区组成）")])]),t._v(" "),_("p",[t._v("注意")]),t._v(" "),_("ul",[_("li",[t._v("磁盘块是操作系统中的一个虚拟概念")]),t._v(" "),_("li",[t._v("扇区是磁盘上真实存在的物理区域")])]),t._v(" "),_("h3",{attrs:{id:"查看硬盘信息"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#查看硬盘信息"}},[t._v("#")]),t._v(" 查看硬盘信息")]),t._v(" "),_("p",[t._v("Windows")]),t._v(" "),_("ul",[_("li",[t._v("如果是查看D盘，管理员权限打开命令行工具，输入【fsutil fsinfo ntfsinfo d:】")]),t._v(" "),_("li",[t._v("或者搜索框输入【系统信息】")])]),t._v(" "),_("p",[t._v("Mac")]),t._v(" "),_("ul",[_("li",[t._v("使用【磁盘工具】")])]),t._v(" "),_("h3",{attrs:{id:"操作系统读取硬盘数据的过程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#操作系统读取硬盘数据的过程"}},[t._v("#")]),t._v(" 操作系统读取硬盘数据的过程")]),t._v(" "),_("p",[t._v("① 操作系统将LBA传送给磁盘驱动器并启动读取命令")]),t._v(" "),_("ul",[_("li",[t._v("✓LBA（Logical Block Address，逻辑块地址）")]),t._v(" "),_("li",[t._v("✓比如类似设备号4、磁头号4、磁道号8、扇区号16、扇区计数8这样的信息")])]),t._v(" "),_("p",[t._v("② 磁盘驱动器根据LBA将磁头移动到正确的磁道，盘片开始旋转，将目标扇区旋转到磁头下\n③ 磁盘控制器将扇区数据等信息传送到一个处于磁盘界面的缓冲区\n④ 磁盘驱动器向操作系统发出“数据就绪”信号\n⑤ 操作系统从磁盘界面的缓冲区读取数据")]),t._v(" "),_("ul",[_("li",[t._v("✓既可以按照一个字节一个字节的方式读取")]),t._v(" "),_("li",[t._v("✓也可以启动DMA（Direct Memory Access，直接内存访问）命令读")])]),t._v(" "),_("h3",{attrs:{id:"磁盘完成io操作的时间"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#磁盘完成io操作的时间"}},[t._v("#")]),t._v(" 磁盘完成IO操作的时间")]),t._v(" "),_("p",[t._v("主要由寻道时间、旋转延迟时间、数据传输时间3部分构成")]),t._v(" "),_("p",[t._v("寻道时间（seek）")]),t._v(" "),_("ul",[_("li",[t._v("✓将读写磁头移动至正确的磁道上所需要的时间，这部分时间代价最高")]),t._v(" "),_("li",[t._v("旋转延迟时间（rotation）")]),t._v(" "),_("li",[t._v("✓盘片旋转将目标扇区移动到读写磁头下方所需要的时间，取决于磁盘转速")]),t._v(" "),_("li",[t._v("数据传输时间（transfer）")]),t._v(" "),_("li",[t._v("✓完成传输数据所需要的时间，取决于接口的数据传输率，通常远小于前两部分消耗时间")])]),t._v(" "),_("p",[t._v("决定时间长短的大部分因素是和硬件相关的，但所需移动的磁道数是可以通过操作系统来进行控制的")]),t._v(" "),_("ul",[_("li",[t._v("减少所需移动的磁道数是减少整个硬盘读写时间的有效办法")]),t._v(" "),_("li",[t._v("合理安排磁头的移动以减少寻道时间就是磁盘调度算法的目的所在")])]),t._v(" "),_("h2",{attrs:{id:"mysql的索引底层为何使用b-树"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#mysql的索引底层为何使用b-树"}},[t._v("#")]),t._v(" MySQL的索引底层为何使用B+树？")]),t._v(" "),_("p",[t._v("为了减小IO操作数量，一般把一个节点的大小设计成最小读写单位的大小")]),t._v(" "),_("ul",[_("li",[t._v("MySQL的存储引擎InnoDB的最小读写单位是16K")])]),t._v(" "),_("p",[t._v("对比B树，B+树的优势是")]),t._v(" "),_("ul",[_("li",[t._v("每个节点存储的key数量更多，树的高度更低")]),t._v(" "),_("li",[t._v("所有的具体数据都存在叶子节点上，所以每次查询都要查到叶子节点，查询速度比较稳定")]),t._v(" "),_("li",[t._v("所有的叶子节点构成了一个有序链表，做区间查询时更方便")])]),t._v(" "),_("h3",{attrs:{id:"b树"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#b树"}},[t._v("#")]),t._v(" B树")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://gitee.com/jarrysong/img/raw/master/img/image-20201016090324350.png",alt:"image-20201016090324350"}})]),t._v(" "),_("h3",{attrs:{id:"b-树-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#b-树-2"}},[t._v("#")]),t._v(" B*树")]),t._v(" "),_("p",[t._v("B*树是B+树的变体：给内部节点增加了指向兄弟节点的指针")]),t._v(" "),_("ul",[_("li",[t._v("m阶B*树非根节点的元素数量 x ✓┌ 2m/3 ┐ ≤ x ≤ m")])]),t._v(" "),_("p",[_("img",{attrs:{src:"https://gitee.com/jarrysong/img/raw/master/img/image-20201016090528391.png",alt:"image-20201016090528391"}})])])}),[],!1,null,null,null);v.default=r.exports}}]);